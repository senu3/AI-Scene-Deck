| 用語           | 定義                                                                                                                     | 境界（含む / 含まない）                                                                                             | 主要操作                                                                                                                           | 関連TS型 / TSXコンポーネント（ファイルパス）                                                                                                     |                                                                                                                                                                                                                                                                                                                                          |                                                                                           |
| ------------ | ---------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------- |
| **プロジェクト**   | `Project` 型として **id/name/vaultPath/scenes/createdAt/updatedAt/version/sourcePanel** を持つ構造体。                            | **含む:** vaultPath と scenes を含むプロジェクト構造。 **含まない:** 再生状態/選択状態などのUI状態は `AppState` 側に定義（Project型には存在しない）。     | **作成/保存/読み込み:** StartupModalでvault作成→project.sdp保存→初期シーンで初期化。 **初期化/ロード:** `initializeProject` / `loadProject` 等のストア操作。        | **TS型:** `Project`。 **TSX:** `StartupModal.tsx`（作成/読み込みUI）。                                                                    |                                                                                                                                                                                                                                                                                                                                          |                                                                                           |
| **シーン**      | `Scene` 型として **id/name/cuts/order/notes/folderPath** を持つ単位。                                                            | **含む:** cuts/notes/folderPath などシーン単位の情報。 **含まない:** `vaultPath` はProject側の責務。                             | **追加/削除/名称変更:** ストアの `addScene/removeScene/renameScene` 等。                                                                     | **TS型:** `Scene`。 **TSX:** `Storyline.tsx`（シーン列/カット操作）、`PlaybackControls.tsx`（シーン数表示）。                                         |                                                                                                                                                                                                                                                                                                                                          |                                                                                           |
| **カット**      | `Cut` 型として **assetId/asset/displayTime/order/clip(in/out)/loading** を持つ単位。                                             | **含む:** displayTime や clip 情報（in/out）を含む。 **含まない:** シーン名/並び順は Scene 側に保持。                                 | **追加/削除/時間更新/移動:** ストアの `addCutToScene/removeCut/updateCutDisplayTime/moveCutToScene` 等。 **UI操作:** CutCardのコピー/ペースト/移動/削除メニュー。 | **TS型:** `Cut`。 **TSX:** `CutCard.tsx`、`Storyline.tsx`、`PreviewModal.tsx`（カットをプレビュー項目として使用）。                                   |                                                                                                                                                                                                                                                                                                                                          |                                                                                           |
| **アセット**     | `Asset` 型として **id/name/path/type/thumbnail/duration/metadata/vaultRelativePath/originalPath/hash** を持つメディア単位。          | **含む:** vault同期に必要な `vaultRelativePath/originalPath/hash` を含む。 **含まない:** displayTime や clip は `Cut` 側の責務。 | **同期/インポート:** `importFileToVault`/`prepareAssetForSave`/`prepareAssetForLoad` 等のvault同期ユーティリティ。                                | **TS型:** `Asset`。 **TSX:** `AssetDrawer.tsx`（vault/assetsの一覧）、`Sidebar.tsx`（外部フォルダのアセット閲覧）、`CutCard.tsx`（アセット参照）、`PreviewModal.tsx`（単体アセット再生）。                    |                                                                                                                                                                                                                                                                                                                                          |                                                                                           |
| **アセットドロワー** | `vault/assets` からアセット一覧を表示するDrawer UI。`.index.json` と `.metadata.json` を参照して使用状況バッジを表示。                     | **含む:** vault/assets のファイル列挙・検索・並び替え・使用状況表示。 **含まない:** 外部フォルダの閲覧は `Sidebar` 側。                | **操作:** `loadAssetIndex`/`getFolderContents` で一覧構築、`metadataStore` と `scenes` から使用状況を集計。                                              | **TSX:** `AssetDrawer.tsx`。                                                                                                     |                                                                                                                                                                                                                                                                                                                                          |                                                                                           |
| **ストーリーライン** | `Storyline` コンポーネントで **シーン列とカットのD&D配置** を扱うタイムラインUI。                                                                   | **含む:** シーン/カットのドラッグ&ドロップ、外部ファイルの投入処理。 **含まない:** アセットのフォルダブラウズは `Sidebar` 側で管理。                           | **操作:** カットのドロップ→vaultインポート/追加などを実施。                                                                                           | **TS型:** `Scene`/`Cut`（Storylineで扱うデータはScene/Cut構造）。 **TSX:** `Storyline.tsx`。                                                 |                                                                                                                                                                                                                                                                                                                                          |                                                                                           |
| **プレビュー**    | `PreviewModal` が **単体(Asset) or シーケンス(Cut/Scene)** を再生するモーダル。`PreviewMode` は `scene                                    | all` を定義。                                                                                                 | **含む:** Single Mode（asset指定）/Sequence Mode（items構築）というモード設計。 **含まない:** “プレビュー開始のUI”自体は `PlaybackControls` 側のボタン操作で実施。          | **操作:** `PlaybackControls` の `setPreviewMode('scene'                                                                           | 'all')`と`onPreview`呼び出し。​:codex-file-citation[codex-file-citation]{line_range_start=12 line_range_end=28 path=src/components/PlaybackControls.tsx git_url="https://github.com/senu3/AI-Scene-Deck/blob/claude/asset-management-app-STF0X/src/components/PlaybackControls.tsx#L12-L28"}​ **単体プレビュー起動:**`CutCard`から`openVideoPreview` を利用。 | **TS型:** `PreviewMode`。 **TSX:** `PreviewModal.tsx`、`PlaybackControls.tsx`、`CutCard.tsx`。 |
| **プレビュー項目** | `PreviewItem` は Sequence Mode で使う再生単位（Cut/Scene情報とサムネイルを合成したローカル構造体）。                                   | **含む:** cut/sceneName/sceneIndex/cutIndex/thumbnail。 **含まない:** Asset/Sceneの永続構造（あくまでUI向け派生）。   | **操作:** `PreviewModal` 内で items を構築し Sequence再生の入力に使用。                                                         | **TS型:** `PreviewItem`（`PreviewModal.tsx` 内部型）。 **TSX:** `PreviewModal.tsx`。                                                |
| **プレビュー制御** | `useSequencePlaybackController` が Sequence Mode の再生状態・位置・範囲・ループ・バッファを管理する抽象コントローラ。                     | **含む:** currentIndex/localProgress/isPlaying/range/loop/buffering など。 **含まない:** UI表示やDOM要素生成自体。 | **操作:** `setSource/tick/goToNext/seekAbsolute` 等で再生を進行。                                                             | **TS型:** `PlaybackState`。 **TS:** `src/utils/previewPlaybackController.ts`。                                                     |
| **メディアソース** | `MediaSource` は Video/Image を共通インターフェースで扱う抽象。`createVideoMediaSource`/`createImageMediaSource` で生成。                | **含む:** play/pause/seek/setRate/getCurrentTime/dispose と JSX要素。 **含まない:** プレビューUIやバッファ管理。       | **操作:** `PreviewModal` が現在カットに応じて生成しコントローラへ連携。                                                       | **TS型:** `MediaSource`。 **TSX:** `src/utils/previewMedia.tsx`。                                                                  |
| **保管庫フォルダ**  | `vaultPath` として **プロジェクト/ストアが保持する保管庫ルート**。StartupModalで選択/作成し、assetsフォルダを初期化。                                          | **含む:** vaultPath配下の `assets` をソースパネルに追加する処理。 **含まない:** ユーザが追加する任意の外部フォルダ（Sidebarの追加フォルダ）。                | **操作:** vault選択/作成、assetsフォルダ作成、source panel初期化。                                                                               | **TS型:** `Project.vaultPath`。 **TSX:** `StartupModal.tsx`（保管庫選択/作成UI）。                                                         |                                                                                                                                                                                                                                                                                                                                          |                                                                                           |
| **同期**       | READMEで **「Local folder synchronization」** と明記。コード上では vault同期ユーティリティと ElectronAPI の “Vault asset sync operations” が存在。 | **含む:** vault相対/絶対パス解決、importAssetToVault、index/verifyなどの同期関連API **含まない:** 自動同期のスケジュールやUI表示は未確認。          | **操作:** `importAssetToVault`/`resolveVaultPath`/`loadAssetIndex`/`saveAssetIndex` 等。                                           | **TS型:** `AssetIndex`/`VaultImportResult`（sync関連）。 **TSX:** 直接の同期専用UIは未確認（主要UIは `StartupModal`/`Sidebar`/`Storyline` から実行される）。 |                                                                                                                                                                                                                                                                                                                                          |                                                                                           |

| 用語                    | 定義                                                                                                                    | 境界（含む / 含まない）                                                                                                                                      | 主要操作                                                                                                                                     | 関連するTS型 / TSXコンポーネント（ファイルパス）                                                                                                                                                  |
| --------------------- | --------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Asset Index**       | 保管庫の `assets/.index.json` に保存されるインデックス。`AssetIndex` は `version` と `assets`（`AssetIndexEntry[]`）で構成される。                | **含む:** インデックスの構造（version/assets）。**含まない:** 個別アセットの実体ファイルやメタデータ本体は別管理。                                                                             | **読み書き:** `window.electronAPI.loadAssetIndex` / `saveAssetIndex`。                                                                        | **TS型:** `AssetIndex` / `AssetIndexEntry`（`src/types/index.ts`）。**Electron API:** `loadAssetIndex` / `saveAssetIndex`（`src/vite-env.d.ts`）。                                   |
| **Asset Index Entry** | `AssetIndexEntry` はインポート済みアセット1件分の索引情報（`id/hash/filename/originalName/originalPath/type/fileSize/importedAt`）を持つ。     | **含む:** インポート時のハッシュや元パス、ファイルサイズ、取り込み時刻。**含まない:** 画像/動画のメタデータやサムネイル本体は `Asset` やメタデータ側。                                                             | **構造定義:** `AssetIndexEntry` の型定義が唯一の出典。                                                                                                  | **TS型:** `AssetIndexEntry`（`src/types/index.ts`）。                                                                                                                             |
| **Metadata Store**    | 保管庫直下の `.metadata.json` に保存されるメタデータストア。`MetadataStore` は `version` と `metadata`（`assetId` をキーにした `AssetMetadata`）を持つ。 | **含む:** アセットに紐づくメタ情報（例: 添付音声IDやオフセット、音声解析結果）。**含まない:** アセット実体ファイルやアセット索引（Asset Index）は別管理。                                                         | **読み書き:** `loadMetadataStore` / `saveMetadataStore`。**更新:** `attachAudio` / `detachAudio` / `updateAudioOffset` / `updateAudioAnalysis`。 | **TS型:** `MetadataStore` / `AssetMetadata` / `AudioAnalysis`（`src/types/index.ts`）。**ユーティリティ:** `src/utils/metadataStore.ts`。**参照UI:** `PreviewModal.tsx`、`DetailsPanel.tsx`。 |
| **Asset Metadata**    | `.metadata.json` 内でアセットIDに紐づくメタ情報。添付音声ID・オフセット・画像添付・音声解析結果などを保持する。                                                    | **含む:** `attachedAudioId` / `attachedAudioOffset` / `attachedImageIds` / `audioAnalysis`。**含まない:** 画像の縦横などの `ImageMetadata`（`Asset.metadata`）は別構造。 | **更新:** `updateAssetMetadata` / `removeAssetMetadata` / `attachAudio` / `detachAudio`。                                                   | **TS型:** `AssetMetadata` / `AudioAnalysis`（`src/types/index.ts`）。**ユーティリティ:** `src/utils/metadataStore.ts`。                                                                   |
| **Audio Analysis**    | `AudioAnalysis` は音声の解析データ（`fps/rms/duration/sampleRate/channels/hash`）を保持する構造。                                        | **含む:** RMS配列やサンプルレート等。**含まない:** 実際の音声ファイルや再生制御。                                                                                                   | **更新:** `updateAudioAnalysis`。                                                                                                           | **TS型:** `AudioAnalysis`（`src/types/index.ts`）。**ユーティリティ:** `src/utils/metadataStore.ts`。                                                                                     |
